/* ===== Base ===== */
:root { --blue:#007bff; --gray:#6c757d; --danger:#dc3545; --success:#28a745; --warn:#ffc107; }
*{ box-sizing:border-box }
body{ font-family: -apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Helvetica,Arial,sans-serif; color:#333; background:#f4f7f9; margin:0; }
.hidden{ display:none !important; }

/* ===== Cards / Layout ===== */
main, #auth-container, #archive-container{
  max-width: 900px; margin: 28px auto; padding: 20px 24px; background:#fff;
  border-radius:12px; box-shadow:0 8px 24px rgba(0,0,0,.08);
}
h1,h2{ color:#111; margin:16px 0; padding-bottom:10px; border-bottom:2px solid var(--blue); }
h1{ text-align:center; }

ul{ list-style:none; padding:0; margin:0; }
li{
  display:flex; align-items:center; gap:12px; border:1px solid #e0e0e0; border-left-width:6px;
  background:#fff; border-radius:10px; padding:14px; margin:12px 0; transition:box-shadow .2s, transform .2s;
}
li:hover{ box-shadow:0 10px 20px rgba(0,0,0,.08); transform: translateY(-1px); }
li.completed .task-content span{ color:#aaa; text-decoration: line-through; }

.task-content{ display:flex; flex-direction:column; gap:6px; flex:1; min-width: 0; }
.due-date{ font-size:.85rem; color:#666; cursor: pointer; }

/* ===== Buttons ===== */
button{
  cursor:pointer; border:none; border-radius:8px; padding:10px 14px; font-weight:600; color:#fff; background:var(--blue);
  transition:transform .05s ease, opacity .15s ease;
}
button:active{ transform: translateY(1px); }
button:hover{ opacity:.9; }
#logout-button{ background:var(--danger); }
.main-controls button{ background: var(--gray); }
.move-btn{ background:var(--success); }
.complete-btn{ background:var(--warn); color:#222; }
.move-to-stock-btn, .unarchive-btn{ background:#495057; }
.delete-btn{ background:transparent; padding:6px; }
.delete-btn img{ width:20px; height:20px; filter: grayscale(.2); }

/* ===== Add form ===== */
.add-task-form{ display:flex; gap:10px; align-items:center; margin-bottom:10px; }
.add-task-form input[type="text"]{ flex:1; padding:10px; border:1px solid #ccc; border-radius:8px; }
.add-task-form input[type="date"]{ padding:10px; border:1px solid #ccc; border-radius:8px; }

#color-picker{ display:flex; gap:12px; padding:8px 4px; }
.color-choice{
  width:26px; height:26px; border-radius:50%; border:3px solid transparent; outline: none;
}
.color-choice.selected{ border-color: var(--blue); }
.selected-label-hint{ font-size:.9rem; color:#555; margin-top:4px; }

/* ===== Task row ===== */
.task-buttons{ display:flex; align-items:center; gap:8px; }

/* ラベル選択 */
.label-select{
  min-width:140px; padding:8px 10px; border:1px solid #ddd; border-radius:8px; background:#fff; color:#333;
}

/* ===== Modal ===== */
.modal-backdrop{
  position: fixed; inset:0; background: rgba(0,0,0,.55);
  display:flex; align-items:center; justify-content:center; z-index: 1000;
}
.modal{
  background:#fff; border-radius:12px; width:min(92vw, 560px); padding:22px; box-shadow:0 16px 40px rgba(0,0,0,.25);
}
.labels-list{ max-height:260px; overflow:auto; padding:0; margin:0 0 16px; list-style:none; }
.label-item{
  display:flex; align-items:center; gap:10px; padding:8px 6px; border-bottom:1px solid #eee;
}
.label-color-circle{ width:18px; height:18px; border-radius:50%; border:1px solid #ddd; }
.label-name-input{
  flex:1; min-width: 120px; padding:8px 10px; border:1px solid #ddd; border-radius:8px; background:#fff;
}
.label-row-color{ width:46px; height:36px; border:1px solid #ccc; border-radius:6px; padding:0; }
.save-label-btn{ background: var(--blue); }
.delete-label-btn{ background: var(--danger); }
.inline-form{ display:flex; gap:10px; align-items:center; margin-bottom:12px; }
.inline-form input[type="text"]{ flex:1; padding:10px; border:1px solid #ccc; border-radius:8px; }

/* ===== Auth ===== */
#auth-container input{
  width:100%; padding:12px; border:1px solid #ccc; border-radius:8px; margin:6px 0;
}
.auth-buttons{ display:flex; gap:10px; }

/* ===== Responsive ===== */
@media (max-width: 640px){
  .add-task-form{ flex-direction: column; align-items: stretch; }
  .task-buttons{ margin-left:auto; }
}

/* ===== モバイルの <select> を素直に表示する最低限のリセット ===== */
.label-select {
  -webkit-appearance: menulist; /* iOS Safari でネイティブUIを使う */
  appearance: menulist;
  font-size: 16px;              /* iOSのズーム回避閾値 */
  line-height: 1.2;
  padding: 8px 10px;
  min-width: 180px;
  background: #fff;
  border: 1px solid #cfd6e4;
  border-radius: 10px;
  position: relative;
  z-index: 2;                   /* 隣のボタンより前面に出す */
}

/* ボタン群が select を覆わないように調整 */
.task-buttons {
  position: relative;
  z-index: 1;
}

/* 親要素でタッチが無効化されていると開けないので保険 */
.task-content, li {
  pointer-events: auto;
  overflow: visible;            /* select のポップアップが切れないように */
}