<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IvyTask</title>
  <link rel="stylesheet" href="style.css?v=finalfix">
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#3f51b5">
  <link rel="apple-touch-icon" href="/icon-192.png">
</head>
<body>

  <div id="auth-container">
    <h1>IvyTask</h1>
    <p>アカウントを作成、またはログインしてください</p>
    <input type="email" id="email-input" placeholder="メールアドレス">
    <input type="password" id="password-input" placeholder="パスワード">
    <button id="signup-button">サインアップ</button>
    <button id="login-button">ログイン</button>
    <div class="auth-form-footer">
      <a href="reset-password.html">パスワードをお忘れですか？</a>
    </div>
  </div>

  <main id="app-container" style="display: none;">
    <div id="user-info">
      <span id="user-email"></span>
      <a href="/faq.html" target="_blank" id="faq-button" title="FAQ">
        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="currentColor"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"/></svg>
      </a>
      <button id="logout-button">ログアウト</button>
    </div>

    <h1>IvyTask</h1>

    <div class="main-controls">
      <button id="reload-button">リロード</button>
      <button id="manage-labels-button">ラベルを編集</button>
      <button id="reset-day-button">リセット</button>
      <button id="archive-view-button">アーカイブ</button>
    </div>

    <section>
      <h2>Focalist</h2>
      <ul id="today-tasks"></ul>
    </section>

    <section>
      <h2>タスクストック</h2>
      <ul id="stock-tasks"></ul>
    </section>

    <section>
      <h2>新しいタスクを追加</h2>
      <div class="add-task-form">
        <input type="text" id="new-task-title-input" placeholder="タスクのタイトルを入力...">
        <textarea id="new-task-memo-input" placeholder="内容やメモ...（任意）"></textarea>
        <input type="date" id="due-date-input">
        <button id="add-task-button">ストックに追加</button>
      </div>
      <div id="color-picker"></div>
      <div id="selected-label-hint" class="label-hint"></div>
    </section>
  </main>

  <div id="archive-container" style="display: none;">
      <h1>アーカイブ</h1>
      <ul id="archive-tasks"></ul>
      <button id="back-to-main-button">メイン画面へ戻る</button>
  </div>

  <div id="label-modal-backdrop" class="hidden">
    <div id="label-modal">
      <h2>カテゴリーラベルを管理</h2>
      <ul id="labels-list"></ul>
      <form id="add-label-form">
        <input type="text" id="label-name-input" placeholder="ラベル名 (12文字以内)" maxlength="12" required/>
        <div class="label-color-selector">
          <input type="color" id="label-color-input" value="#CCCCCC"/>
          <button type="submit">新しいラベルを追加</button>
        </div>
      </form>
      <button id="close-label-modal-button">閉じる</button>
    </div>
  </div>

  <div id="task-detail-modal-backdrop" class="hidden">
    <div id="task-detail-modal">
      <div class="view-mode">
        <h2 id="modal-task-title"></h2>
        <p id="modal-task-memo"></p>
      </div>
      <div class="edit-mode hidden">
        <input type="text" id="modal-edit-title-input" placeholder="タスクのタイトル">
        <textarea id="modal-edit-memo-input" placeholder="内容やメモ"></textarea>
      </div>
      <div class="modal-buttons">
        <button id="edit-task-button" class="view-mode">編集</button>
        <button id="save-task-button" class="edit-mode hidden">保存</button>
        <button id="cancel-edit-button" class="edit-mode hidden">キャンセル</button>
        <button id="close-task-detail-modal-button">閉じる</button>
      </div>
    </div>
  </div>

  <script type="module" src="./main.js"></script>

</body>
</html>