<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0, viewport-fit=cover"
  />
  <title>IvyTask</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;600;700&family=Noto+Serif+JP:wght@600;700&display=swap"
    rel="stylesheet"
  />

  <!-- Styles -->
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <!-- ===== 認証 ===== -->
  <div id="auth-container">
    <h1>IvyTask</h1>
    <p>アカウントを作成、またはログインしてください</p>
    <input type="email" id="email-input" placeholder="メールアドレス" />
    <input type="password" id="password-input" placeholder="パスワード" />
    <div class="auth-buttons">
      <button id="signup-button">サインアップ</button>
      <button id="login-button">ログイン</button>
    </div>
  </div>

  <!-- ===== 本体 ===== -->
  <main id="app-container" class="hidden">
    <div id="user-info">
      <span id="user-email"></span>

      <!-- FAQ -->
      <a href="/faq.html" target="_blank" id="faq-button" title="FAQ">
        <svg xmlns="http://www.w3.org/2000/svg" height="22" viewBox="0 0 24 24" width="22" fill="currentColor">
          <path d="M0 0h24v24H0V0z" fill="none"/>
          <path d="M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"/>
        </svg>
      </a>

      <button id="logout-button">ログアウト</button>
    </div>

    <h1>IvyTask</h1>

    <div class="main-controls">
      <button id="manage-labels-button">ラベルを編集</button>
      <button id="reset-day-button">Reset</button>
      <button id="archive-view-button">アーカイブ</button>
    </div>

    <!-- Focalist -->
    <section>
      <h2>Focalist</h2>
      <ul id="today-tasks"></ul>
    </section>

    <!-- ストック -->
    <section>
      <h2>タスクストック</h2>
      <ul id="stock-tasks"></ul>
    </section>

    <!-- 追加フォーム -->
    <section>
      <h2>新しいタスクを追加</h2>
      <div class="add-task-form">
        <input type="text" id="new-task-input" placeholder="やるべきことを入力..." />
        <input type="date" id="due-date-input" />
        <button id="add-task-button">ストックに追加</button>
      </div>

      <!-- カラーピッカー & 選択中ラベル名 -->
      <div id="color-picker"></div>
      <div id="selected-label-name" class="selected-label-hint"></div>
    </section>
  </main>

  <!-- ===== アーカイブ ===== -->
  <div id="archive-container" class="hidden">
    <h1>アーカイブ</h1>
    <ul id="archive-tasks"></ul>
    <button id="back-to-main-button">メイン画面へ戻る</button>
  </div>

  <!-- ===== ラベル管理モーダル ===== -->
  <div id="label-modal-backdrop" class="hidden modal-backdrop">
    <div id="label-modal" class="modal">
      <h2>カテゴリーラベルを管理</h2>
      <ul id="labels-list" class="labels-list"></ul>

      <form id="add-label-form" class="inline-form">
        <input
          type="text"
          id="label-name-input"
          placeholder="ラベル名 (12文字以内)"
          maxlength="12"
          required
        />
        <div class="label-color-selector">
          <input type="color" id="label-color-input" value="#CCCCCC" />
          <button type="submit">新しいラベルを追加</button>
        </div>
      </form>

      <button id="close-label-modal-button">閉じる</button>
    </div>
  </div>

  <!-- ===== ロジック（※1本だけ） ===== -->
  <!-- クエリを更新してキャッシュを確実に無効化 -->
  <script type="module" src="./main.js?v=20250812-7"></script>
</body>
</html>